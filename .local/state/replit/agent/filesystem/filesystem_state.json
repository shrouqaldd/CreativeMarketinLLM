{"file_contents":{"main.py":{"content":"from flask import Flask, render_template, request, jsonify\nimport os\nimport json\nimport google.generativeai as genai\n\napp = Flask(__name__)\napp.secret_key = os.environ.get('SESSION_SECRET', 'dev-secret-key')\n\ngenai.configure(api_key=os.environ.get('GEMINI_API_KEY'))\nmodel = genai.GenerativeModel('gemini-2.5-flash')\n\n\n@app.route('/', methods=['GET', 'POST'])\ndef index():\n    if request.method == 'POST':\n        try:\n            data = request.get_json()\n            brief = data.get('brief', '')\n\n            if not brief:\n                return jsonify({'error': 'الرجاء إدخال نص الموجز'}), 400\n\n            prompt = f\"\"\"\nYou are **The Creative Agent** — a Saudi creative director and marketing copywriter.\nYour job is to analyze marketing briefs (Arabic/English) and turn them into structured,\nemotional, high-quality creative output written in natural Saudi Arabic.\n\nYour writing style must stay consistent:\n- Light Saudi conversational Arabic\n- Warm, human, and relatable\n- Short, visual sentences\n- No exaggerated cinematic drama\n\n### TONE EXAMPLE (use this vibe):\nتخيّل معاي…\nالساعة ٢ الظهر، حرّ الرياض اللي ما يرحم، وتوّك طالع من الجامعة أو الدوام، مخّك مقفل وتحتاج شيء يبرد على قلبك ويصحصحك، بس بدون سكر زايد ولا تأنيب ضمير بعد أول رشفة.\nتفتح الثلاجة… تشوف قدامك علبة باردة تناديك، تعدك بانتعاش يضرب في راسك من أول جرعة.\nطعم طبيعي وخفيف.\nليمون ونعناع… انتعاش يروق مزاجك. \n\nThis example defines the tone. Follow its style, simplicity, and emotional flow.\n\n### WHAT YOU MUST RETURN:\n1. **Summary**\n   A short, clear summary of the brief in Saudi Arabic.\n2. **Key Insights**\n   Extract the main insights from the brief (3–5 lines).\n3. **Creative Script**\n   An emotional Saudi-Arabic script (2–3 small paragraphs) inspired by the tone example.\n   Requirements:\n   - Describe a relatable moment\n   - Smooth emotional shift when the product appears\n   - Natural and warm\n   - CTA\n4. **Social Media Captions**\n   Provide exactly 3 short Saudi-Arabic captions (no more than 3).\n\n\n### INPUT BRIEF:\n{brief}\n\n### OUTPUT FORMAT (STRICT JSON):\nReturn ONLY this JSON. No extra text.\n\n{{\n  \"summary\": \"Your summary here\",\n  \"insights\": [\"Insight 1\", \"Insight 2\", \"Insight 3\"],\n  \"creative_script\": \"Your creative Saudi-Arabic script here\",\n  \"social_captions\": [\"Caption 1\", \"Caption 2\", \"Caption 3\"]\n}}\n\"\"\"\n\n\n            response = model.generate_content(prompt,\n                                              generation_config={\n                                                  \"temperature\": 0.8,\n                                                  \"max_output_tokens\": 4096,\n                                                  \"response_mime_type\": \"application/json\"\n                                              })\n\n            result = response.text\n\n            if not result:\n                return jsonify(\n                    {'error': 'لم يتم الحصول على رد من الذكاء الاصطناعي'}), 500\n\n            parsed_result = json.loads(result)\n\n            return jsonify(parsed_result)\n\n        except Exception as e:\n            return jsonify({'error': f'حدث خطأ: {str(e)}'}), 500\n\n    return render_template('index.html')\n\n\nif __name__ == '__main__':\n    app.run(host='0.0.0.0', port=5000, debug=True)\n","size_bytes":3515},"pyproject.toml":{"content":"[project]\nname = \"repl-nix-workspace\"\nversion = \"0.1.0\"\ndescription = \"Add your description here\"\nrequires-python = \">=3.11\"\ndependencies = [\n    \"flask>=3.1.2\",\n    \"google-generativeai>=0.8.5\",\n    \"openai>=2.8.0\",\n    \"python-dotenv>=1.2.1\",\n]\n","size_bytes":247},"static/style.css":{"content":"* {\n    margin: 0;\n    padding: 0;\n    box-sizing: border-box;\n}\n\nbody {\n    font-family: 'Cairo', sans-serif;\n    background: #FFFFFF;\n    color: #1A1A1A;\n    line-height: 1.6;\n    direction: rtl;\n}\n.hero {\n    position: relative;\n    background-color: #0E5B52;\n    text-align: center;\n    padding: 120px 24px 80px;\n    border-radius: 0 0 48px 48px;\n    margin-bottom: 80px;\n    overflow: hidden;\n}\n\n\n.hero::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: rgba(0, 0, 0, 0.35);\n    backdrop-filter: blur(2px);\n    z-index: 1;\n}\n\n.hero-title {\n    position: relative;\n    z-index: 2;\n    font-size: 64px;\n    font-weight: 800;\n    color: #F5F5DC;\n    margin-bottom: 24px;\n    letter-spacing: -0.02em;\n}\n\n.hero-subtitle {\n    position: relative;\n    z-index: 2;\n    font-size: 20px;\n    font-weight: 400;\n    color: #FFFFFF;\n    max-width: 600px;\n    margin: 0 auto;\n    line-height: 1.8;\n}\n\n.container {\n    max-width: 920px;\n    margin: 0 auto;\n    padding: 0 24px 120px;\n}\n\n.error-message {\n    background: #FFF5F5;\n    border: 1px solid #E6E6E6;\n    border-right: 4px solid #DC2626;\n    padding: 20px 24px;\n    border-radius: 8px;\n    margin-bottom: 48px;\n    color: #DC2626;\n    font-size: 15px;\n}\n\n.form-card {\n    background: #FAFAFA;\n    border: 1px solid #E6E6E6;\n    border-radius: 16px;\n    padding: 56px;\n    margin-bottom: 80px;\n}\n\n.input-row {\n    margin-bottom: 40px;\n}\n\n.input-row:last-of-type {\n    margin-bottom: 48px;\n}\n\n.input-group {\n    display: flex;\n    flex-direction: column;\n}\n\n.input-label {\n    font-size: 15px;\n    font-weight: 600;\n    color: #1A1A1A;\n    margin-bottom: 12px;\n}\n\n.input-field {\n    width: 100%;\n    padding: 16px 20px;\n    font-family: 'Cairo', sans-serif;\n    font-size: 16px;\n    background: #FFFFFF;\n    border: 1px solid #E6E6E6;\n    border-radius: 8px;\n    color: #1A1A1A;\n    transition: all 0.2s ease;\n}\n\n.input-field:focus {\n    outline: none;\n    border-color: #0D5C4D;\n    box-shadow: 0 0 0 3px rgba(13, 92, 77, 0.08);\n}\n\n.input-field::placeholder {\n    color: #A0A0A0;\n}\n\n.textarea {\n    resize: vertical;\n    min-height: 120px;\n    line-height: 1.7;\n}\n\n.tone-options {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 12px;\n}\n\n.tone-pill {\n    position: relative;\n    cursor: pointer;\n}\n\n.tone-pill input[type=\"checkbox\"] {\n    position: absolute;\n    opacity: 0;\n    width: 0;\n    height: 0;\n}\n\n.tone-pill span {\n    display: inline-block;\n    padding: 10px 24px;\n    background: #FFFFFF;\n    border: 1px solid #E6E6E6;\n    border-radius: 24px;\n    font-size: 14px;\n    font-weight: 500;\n    color: #4A4A4A;\n    transition: all 0.2s ease;\n}\n\n.tone-pill input[type=\"checkbox\"]:checked + span {\n    background: #0D5C4D;\n    border-color: #0D5C4D;\n    color: #FFFFFF;\n}\n\n.tone-pill:hover span {\n    border-color: #0D5C4D;\n}\n\n.analyze-btn {\n    width: 100%;\n    padding: 20px;\n    background: #0D5C4D;\n    color: #FFFFFF;\n    font-family: 'Cairo', sans-serif;\n    font-size: 18px;\n    font-weight: 600;\n    border: none;\n    border-radius: 8px;\n    cursor: pointer;\n    transition: all 0.2s ease;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    gap: 12px;\n}\n\n.analyze-btn:hover:not(:disabled) {\n    background: #0A4A3D;\n    transform: translateY(-1px);\n    box-shadow: 0 4px 12px rgba(13, 92, 77, 0.2);\n}\n\n.analyze-btn:disabled {\n    opacity: 0.6;\n    cursor: not-allowed;\n}\n\n.loader {\n    width: 20px;\n    height: 20px;\n    border: 2px solid rgba(255, 255, 255, 0.3);\n    border-top-color: #FFFFFF;\n    border-radius: 50%;\n    animation: spin 0.6s linear infinite;\n}\n\n@keyframes spin {\n    to { transform: rotate(360deg); }\n}\n\n.results {\n    display: grid;\n    gap: 32px;\n}\n\n.result-card {\n    background: #FFFFFF;\n    border: 1px solid #E6E6E6;\n    border-radius: 16px;\n    padding: 48px;\n}\n\n.result-card.featured {\n    background: #F6F7F5;\n    border: 2px solid #0D5C4D;\n}\n\n.result-heading {\n    font-size: 18px;\n    font-weight: 700;\n    color: #0D5C4D;\n    margin-bottom: 24px;\n    text-transform: uppercase;\n    letter-spacing: 0.5px;\n}\n\n.result-text {\n    font-size: 18px;\n    line-height: 2;\n    color: #1A1A1A;\n}\n\n.insights-list {\n    list-style: none;\n    display: grid;\n    gap: 16px;\n}\n\n.insights-list li {\n    font-size: 16px;\n    line-height: 1.8;\n    color: #1A1A1A;\n    padding: 16px 20px;\n    background: #F6F7F5;\n    border-right: 4px solid #0D5C4D;\n    border-radius: 4px;\n}\n\n.creative-script {\n    font-size: 20px;\n    line-height: 2.2;\n    color: #1A1A1A;\n    white-space: pre-wrap;\n}\n\n.social-captions {\n    display: grid;\n    gap: 20px;\n}\n\n.caption-box {\n    font-size: 16px;\n    line-height: 1.9;\n    color: #1A1A1A;\n    padding: 24px;\n    background: #F6F7F5;\n    border: 1px solid #E6E6E6;\n    border-radius: 8px;\n}\n\n.footer {\n    text-align: center;\n    padding: 48px 24px;\n    color: #A0A0A0;\n    font-size: 13px;\n}\n\n@media (max-width: 768px) {\n    .hero {\n        padding: 80px 20px 60px;\n        border-radius: 0 0 32px 32px;\n        margin-bottom: 60px;\n    }\n\n    .hero-title {\n        font-size: 42px;\n    }\n\n    .hero-subtitle {\n        font-size: 17px;\n    }\n\n    .container {\n        padding: 0 20px 80px;\n    }\n\n    .form-card {\n        padding: 32px 24px;\n    }\n\n    .result-card {\n        padding: 32px 24px;\n    }\n\n    .tone-options {\n        gap: 8px;\n    }\n\n    .tone-pill span {\n        padding: 8px 20px;\n        font-size: 13px;\n    }\n\n    .creative-script {\n        font-size: 18px;\n    }\n}\n\n@media (max-width: 480px) {\n    .hero-title {\n        font-size: 36px;\n    }\n\n    .hero-subtitle {\n        font-size: 16px;\n    }\n\n    .form-card {\n        padding: 24px 20px;\n    }\n\n    .result-card {\n        padding: 24px 20px;\n    }\n\n    .input-row {\n        margin-bottom: 32px;\n    }\n\n    .analyze-btn {\n        font-size: 16px;\n        padding: 18px;\n    }\n}\n","size_bytes":5859},"replit.md":{"content":"# الوكيل الإبداعي - Creative Agent\n\n## Overview\nA modern Arabic (RTL) web application that analyzes marketing briefs using Google's Gemini 1.5 Flash AI. The app provides intelligent analysis including summaries, key insights, creative ideas with Saudi cinematic storytelling, and social media captions.\n\n## Current State\n- **Status**: Fully functional with clean NOB-inspired design\n- **Stack**: Python + Flask + HTML + CSS + JavaScript + Google Gemini API\n- **Language**: Arabic (RTL) with English support\n- **API**: Google Gemini 1.5 Flash (free tier from AI Studio)\n- **Design**: Clean minimal creative-agency aesthetic (NOB-style)\n\n## Recent Changes\n- **2024-11-16** (Latest): \n  - Initial project setup with Flask backend\n  - RTL Arabic UI with modern gradient design\n  - Integrated Google Gemini 1.5 Flash for AI-powered analysis\n  - Fixed GenerationConfig API usage to use dictionary format\n  - Updated model name to 'gemini-1.5-flash-latest' for compatibility\n  - Added proper error handling and JSON response parsing\n  - Improved prompt with cleaner structure and clear tone example\n  - Switched from `creative_ideas` (array) to `creative_script` (single cohesive script)\n  - Added detailed requirements for consistent Saudi-Arabic storytelling with CTA\n  - Frontend updated to display creative script as single formatted block with line breaks preserved\n  - Increased max_output_tokens to 4096 to ensure complete responses\n  - Reduced social captions to exactly 3 for better token efficiency\n  - **Final UI redesign** with NOB Marketing Solutions-inspired aesthetic:\n    - White/light background (#F6F7F5 and #FFFFFF)\n    - Deep dark green brand color (#0D5C4D)\n    - Huge whitespace and generous spacing\n    - Large confident Arabic headlines\n    - Hero section with rounded bottom corners\n    - Soft off-white form card (#FAFAFA) with subtle borders (#E6E6E6)\n    - Clean toggle pills for tone selection\n    - Minimal cards for results with soft borders\n    - No gradients or heavy shadows - clean and elegant\n\n## Project Architecture\n\n### Backend (Flask)\n- **main.py**: Single route (`/`) handling both GET (render page) and POST (process AI request)\n- Uses Google Generative AI SDK for Gemini 1.5 Flash\n- Optimized prompt with clear tone example and structured requirements\n- Enforces consistent Saudi conversational style with specific storytelling framework\n- JSON response format with 4 fields: summary, insights, creative_script, social_captions\n- Error handling for API failures\n\n### Frontend\n- **templates/index.html**: RTL Arabic single-page interface with clean NOB-style design\n- **static/style.css**: Minimal responsive design with Cairo font, white background, deep green accents\n- Interactive UI with loading states and smooth animations\n\n### Folder Structure\n```\n/\n├── main.py                 # Flask backend\n├── templates/\n│   └── index.html         # RTL Arabic UI\n├── static/\n│   └── style.css          # NOB-inspired styling\n├── .gitignore             # Git ignore rules\n└── replit.md              # Project documentation\n```\n\n## Features\n1. **Marketing Brief Analysis**: Paste any brief (Arabic, English, or mixed)\n2. **AI-Powered Insights**: \n   - Executive summary in Saudi Arabic\n   - Key insights extraction (3-5 main points)\n   - Creative script with Saudi cinematic storytelling (2-3 paragraphs with CTA)\n   - Social media captions optimized for Saudi audience (3 captions)\n3. **RTL Arabic Interface**: Clean, modern NOB-style design suitable for Saudi users\n4. **Real-time Processing**: Loading states and error handling\n\n## Writing Style\n- Light Saudi conversational Arabic (not heavy formal Arabic)\n- Warm, human, and relatable tone\n- Short, visual sentences that create mental imagery\n- No exaggerated cinematic drama\n- Follows tone example: \"تخيّل معاي… الساعة ٢ الظهر، حرّ الرياض...\"\n\n## API Configuration\n- **Required Secret**: `GEMINI_API_KEY` (from https://aistudio.google.com/app/apikey)\n- **Model**: gemini-1.5-flash-latest\n- **Temperature**: 0.8 (creative outputs)\n- **Response Format**: JSON\n\n## User Preferences\n- Language: Arabic (RTL) as default\n- Design: Clean minimal NOB-style with white background and deep green\n- Audience: Saudi Arabian market\n- AI Provider: Google Gemini (free tier)\n","size_bytes":4338}},"version":2}